<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Search</title>
  <style>
    body { 
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:linear-gradient(135deg,#6b73ff,#000dff);
      display:flex; justify-content:center; align-items:center; height:100vh; margin:0; color:#fff; 
    }
    form { 
      background:rgba(0,0,50,.8); padding:30px 40px; border-radius:12px; 
      box-shadow:0 0 25px rgba(0,0,0,.3); width:320px; 
      animation:fadeInDown .8s ease forwards; 
    }
    @keyframes fadeInDown { 
      from{opacity:0; transform:translateY(-40px);} 
      to{opacity:1; transform:translateY(0);} 
    }
    h2 { 
      text-align:center; margin-bottom:20px; letter-spacing:1.4px; 
      font-weight:700; text-shadow:1px 1px 3px rgba(0,0,0,.4); 
    }
    p { margin-bottom:10px; font-weight:600; }
    label { 
      display:inline-block; margin-right:15px; cursor:pointer; 
      position:relative; padding-left:25px; 
    }
    input[type="radio"] { position:absolute; opacity:0; }
    label input[type="radio"] + span { 
      position:absolute; left:0; top:2px; height:16px; width:16px; 
      background:#ccc; border-radius:50%; 
    }
    label input[type="radio"]:checked + span { 
      background:#66ccff; box-shadow:0 0 6px 2px #66ccff; 
    }
    label span::after { content:""; position:absolute; display:none; }
    label input[type="radio"]:checked + span::after { display:block; }
    label span::after { 
      top:4px; left:4px; width:8px; height:8px; border-radius:50%; background:#fff; 
    }
    #loginLabel { display:block; margin:10px 0 6px; font-weight:600; }
    input[type="text"], input[type="number"], input[type="password"] { 
      width:100%; padding:10px 12px; border-radius:6px; border:none; 
      margin-bottom:20px; font-size:16px; 
    }
    input[type="text"]:focus, input[type="number"]:focus, input[type="password"]:focus { 
      outline:none; box-shadow:0 0 8px 3px #66ccff; 
    }
    input[type="submit"] { 
      width:100%; background:#1db954; border:none; padding:12px; 
      border-radius:6px; font-size:16px; font-weight:700; color:#fff; 
      cursor:pointer; box-shadow:0 4px 20px rgba(29,185,84,.6); 
    }
    input[type="submit"]:hover { 
      background:#17a140; box-shadow:0 6px 28px rgba(23,161,64,.8); 
    }
    .message { margin-top:16px; padding:10px 12px; border-radius:8px; text-align:center; font-weight:600; }
    .error { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }

    ul#results {
      margin-top: 20px;
      padding: 0;
      width: 320px;
      list-style: none;
      background: rgba(0,0,50,.8);
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,.3);
      max-height: 200px;
      overflow-y: auto;
      color: #fff;
    }
    ul#results li {
      padding: 12px;
      border-bottom: 1px solid #66ccff;
    }
  </style>
</head>
<body>

  <form id="searchForm" action="/users/search/" method="get" >
    <h2>Search User</h2>
    <p>Search using:</p>

    <label>
      <input type="radio" name="loginType" value="id" checked />
      <span></span> ID
    </label>
    <label>
      <input type="radio" name="loginType" value="name" />
      <span></span> Name
    </label>
    <label>
      <input type="radio" name="loginType" value="email" />
      <span></span> Email
    </label>

    <label id="loginLabel" for="loginValue">ID:</label>
    <input type="number" id="loginValue" name="loginValue" required />

    <input type="submit" value="Search" />

    <div style="margin-top:30px; text-align:center;">
      <span>New User?</span> <a href="register.html" style="color:#66ccff;">Click Here</a>
    </div>  
  </form>
  
  <table id="resultsTable" style="margin-top:20px; width:320px; border-collapse: collapse; background: rgba(0,0,50,.8); border-radius: 12px; box-shadow: 0 0 15px rgba(0,0,0,.3); color: #fff;">
  <thead>
    <tr>
      <th style="padding: 20px; border-bottom: 1px solid #66ccff; text-align: left;">ID</th>
      <th style="padding: 20px; border-bottom: 1px solid #66ccff; text-align: left;">Name</th>
      <th style="padding: 20px; border-bottom: 1px solid #66ccff; text-align: left;">Email</th>
    </tr>
  </thead>
  <tbody>
    <!-- Dynamic rows inserted here -->
  </tbody>
</table>
  <script>
    const loginTypeRadios = document.querySelectorAll('input[name="loginType"]');
    const loginLabel = document.getElementById('loginLabel');
    const loginValueInput = document.getElementById('loginValue');
    
    loginTypeRadios.forEach(radio => {
      radio.addEventListener('change', () => {
        const val = document.querySelector('input[name="loginType"]:checked').value;
        loginLabel.textContent = (val === 'id' ? 'ID' : val.charAt(0).toUpperCase() + val.slice(1)) + ':';
        loginValueInput.value = '';
        loginValueInput.type = (val === 'id') ? 'number' : 'text';
        loginValueInput.focus();
      });
    });

    document.getElementById('searchForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const loginType = document.querySelector('input[name="loginType"]:checked').value;
      const loginValue = loginValueInput.value.trim();
      if (!loginValue) {
          alert('Please enter a valid ' + loginType);
          return;
      }
      
      let url = '/users/search/';
      switch (loginType) {
        case 'id':
          url += 'id/' + encodeURIComponent(loginValue);
          break;
        case 'name':
          url += 'name/' + encodeURIComponent(loginValue);
          break;
        case 'email':
          url += 'email/' + encodeURIComponent(loginValue);
          break;
        default:
          url += 'name/' + encodeURIComponent(loginValue);
      }

      fetch(url)
        .then(response => {
          if (!response.ok) throw new Error('User not found or error');
          return response.json();
        })
.then(data => {
    const tableBody = document.querySelector('#resultsTable tbody');
    tableBody.innerHTML = ''; // Clear previous rows

    const users = Array.isArray(data) ? data : [data];

    users.forEach(user => {
        const row = document.createElement('tr');

        const idCell = document.createElement('td');
        idCell.textContent = user.id;
        idCell.style.padding = '8px';

        const nameCell = document.createElement('td');
        nameCell.textContent = user.name;
        nameCell.style.padding = '8px';

        const emailCell = document.createElement('td');
        emailCell.textContent = user.email;
        emailCell.style.padding = '8px';

        row.appendChild(idCell);
        row.appendChild(nameCell);
        row.appendChild(emailCell);

        tableBody.appendChild(row);
    });
})
        .catch(err => {
          alert(err.message);
          document.getElementById('results').innerHTML = '';
        });
    });
  </script>

</body>
</html>